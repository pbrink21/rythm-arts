<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Shop</title>
  <link rel="stylesheet" href="style.css">
</head>

<body class="leaderboardBackground">
  <div id="menu bar" class="topnav">
    <div class="topnav-centered">
      <ul>
        <li><a class="navButton" href="/mainmenu">Game</a></li>
        <li><a class="navButton" href="/highscore">Hi-Score</a></li>
        <li><a class="active" href="/shop">Shop</a></li>
      </ul>
    </div>

    <audio id="audio" src="...sounds\otherPagesMusic.mp3"></audio>

    <script>
      document.addEventListener('click', musicPlay);
      function musicPlay() {
        document.getElementById('audio').play();
        document.removeEventListener('click', musicPlay);
      }
    </script>

  </div>
  <div class="overcontainer">
    <div class="shop">
      <form id="shop">
        <div class="">
          <button id="saves1" value="100" class="shop-item" onClick="buy(saves, 1)">More Saves 1</button>
          <button id="saves2" value="200" class="shop-item" onClick="buy(saves, 2)">More Saves 2</button>
          <button id="saves3" value="400" class="shop-item" onClick="buy(saves, 3)">More Saves 3</button>
        </div>
        
        <div>
          <button id="time1" value="100" class="shop-item" onClick="buy(time, 1)">Slow Time 1</button>
          <button id="time2" value="200" class="shop-item" onClick="buy(time, 2)">Slow Time 2</button>
          <button id="time3" value="400" class="shop-item" onClick="buy(time, 3)">Slow Time 3</button>
        </div>

        <div>
          <button id="ball1" value="100" class="shop-item" onClick="buy(ball, 1)">Larger Balls 1</button>
          <button id="ball2" value="200" class="shop-item" onClick="buy(ball, 2)">Larger Balls 2</button>
          <button id="ball3" value="400" class="shop-item" onClick="buy(ball, 3)">Larger Balls 3</button>
        </div>
        
      </form>
    </div>
  </div>
  <div id="game bar" class="bottombar"></div>

  <script>
    function getCookie(cname) {
      var name = cname + "=";
      var decodedCookie = decodeURIComponent(document.cookie);
      var ca = decodedCookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }

    var user = getCookie("user");
    console.log(user.points);
    var points = 10000;
    var u;

    if (users.length == 0) {
      console.log("no users grabbed");
    } else {
      users.array.forEach(element => {
        console.log(l.user_name);
        if (l.user_name = user) {
          u = l;
          points = l.points;
        }
      });
    }


    function buy(perk, level) {
      var button = form.getElementById(perk+level);
      if(points >= button.value){
        points -= button.value;
        var p = new Date();
        p.setTime(p.getTime() + (3 * 24 * 60 * 60 * 1000));
        var expires = "expires=" + p.toUTCString();
        document.cookie = perk + "=" + level + ";" + expires + "path=/";
      }
    }

    
  </script>
</body>

</html>